!function(){"use strict";var t={d:function(e,n){for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}};t.d({},{J:function(){return r}});let e=0;class n{constructor(){this.title=document.querySelector("#note-title").value,this.content=document.querySelector("#note-text").value,this.color=document.querySelector("#pick-color").value,this.x=null,this.y=null,this.xProp=null,this.yProp=null,this.zIndex=++e,this.noteWindow=""}putNoteIntoDom(){this.noteWindow=document.createElement("div"),this.noteWindow.className="note-window",this.noteWindow.setAttribute("draggable","true"),this.noteWindow.style.backgroundColor=this.color,this.noteWindow.style.zIndex=this.zIndex,this.noteInnerHTML(),document.getElementById("drop").appendChild(this.noteWindow),null!==this.x&&null!==this.y&&this.setAbsolutePositionOnScreen(),this.deleteNoteListener(),this.dragDropListener(),this.editNoteListener()}noteInnerHTML(){this.noteWindow.innerHTML=`\n        <div class="note-header">\n                <p id="note-window-title">${this.title}</p>\n                <div>\n                    <button class="note-window-btn" id="edit-note"><i class="ti ti-pencil"></i></button>\n                    <button class="note-window-btn" id="delete-note"><i class="ti ti-trash"></i></button>\n                </div>\n\n            </div>\n            <div class="note-window-content" id="note-window-content">\n                <pre>${this.content}</pre>\n            </div>\n        `}deleteNoteListener(){this.noteWindow.querySelector("#delete-note").addEventListener("click",(t=>{t.target.closest(".note-window").remove();const n=r.indexOf(this);r.splice(n,1),0===r.length&&(e=5),window.localStorage.setItem("notes",JSON.stringify(r))}))}dragDropListener(){this.noteWindow.addEventListener("dragstart",(t=>{t.dataTransfer.setData("text/plain",this),this.deltaX=t.pageX-this.noteWindow.offsetLeft,this.deltaY=t.pageY-this.noteWindow.offsetTop})),this.noteWindow.addEventListener("dragend",(t=>{this.changeNotePos(t,this.deltaX,this.deltaY),this.zIndex=e+1,e>1e3?e=0:e++,this.noteWindow.style.zIndex=this.zIndex,this.setAbsolutePositionOnScreen(),window.localStorage.setItem("notes",JSON.stringify(r))})),this.noteWindow.addEventListener("touchstart",(t=>{this.deltaX=t.changedTouches[0].clientX-this.noteWindow.offsetLeft,this.deltaY=t.changedTouches[0].clientY-this.noteWindow.offsetTop})),this.noteWindow.addEventListener("touchend",(t=>{this.changeNotePosMobiles(t,this.deltaX,this.deltaY),this.zIndex=e+1,e>1e3?e=0:e++,this.noteWindow.style.zIndex=this.zIndex,this.setAbsolutePositionOnScreen(),window.localStorage.setItem("notes",JSON.stringify(r))}))}changeNotePos(t,e,n){this.x=t.pageX-e,this.y=t.pageY-n,this.positionChange(),this.xProp=this.x/window.innerWidth,this.yProp=this.y/window.innerHeight}changeNotePosMobiles(t,e,n){this.x=t.changedTouches[0].clientX-e,this.y=t.changedTouches[0].clientY-n,this.positionChange(),this.xProp=this.x/window.innerWidth,this.yProp=this.y/window.innerHeight}windowResizeHandler(){null!==this.x&&null!==this.y&&(this.x=window.innerWidth*this.xProp,this.y=window.innerHeight*this.yProp,this.positionChange())}positionChange(){this.x<5&&(this.x=5),this.x>window.innerWidth-this.noteWindow.scrollWidth&&(this.x=window.innerWidth-this.noteWindow.scrollWidth-5),this.y<85&&(this.y=85),this.y>window.innerHeight-this.noteWindow.scrollHeight&&(this.y=window.innerHeight-this.noteWindow.scrollHeight-5),this.noteWindow.style.top=`${this.y}px`,this.noteWindow.style.left=`${this.x}px`,window.localStorage.setItem("notes",JSON.stringify(r))}editNoteListener(){const t=document.querySelector(".edit-note-window"),e=t.querySelector(".edit-note-btns");this.editBtn=this.noteWindow.querySelector("#edit-note"),this.editBtn.addEventListener("click",(()=>{this.editConfirmBtn=document.createElement("button"),this.editConfirmBtn.setAttribute("class","btn btn-ok"),this.editConfirmBtn.setAttribute("id","edit-ok"),this.editConfirmBtn.innerHTML='<i class="ti ti-circle-check"></i>',e.prepend(this.editConfirmBtn),t.style.display="flex",t.querySelector("#edit-note-title").value=this.title,t.querySelector("#edit-note-text").value=this.content,t.querySelector("#edit-pick-color").value=this.color,t.querySelector("#edit-ok").addEventListener("click",(()=>{this.title=t.querySelector("#edit-note-title").value,this.content=t.querySelector("#edit-note-text").value,this.color=t.querySelector("#edit-pick-color").value,this.noteWindow.querySelector("#note-window-title").textContent=this.title,this.noteWindow.querySelector("pre").textContent=this.content,this.noteWindow.style.backgroundColor=this.color,t.style.display="none",this.editConfirmBtn.remove(),window.localStorage.setItem("notes",JSON.stringify(r))}))}))}setAbsolutePositionOnScreen(){this.noteWindow.classList.add("position-absolute")}}const i=document.getElementById("createNote"),o=document.getElementById("line-notes"),s=document.getElementById("create-reject"),d=document.getElementById("create-ok"),l=document.getElementById("edit-reject"),r=[],c=JSON.parse(window.localStorage.getItem("notes"));function h(){document.querySelector(".create-note-window").style.display="none",document.querySelector("#note-title").value="",document.querySelector("#note-text").value=""}c&&c.forEach((t=>{const e=Object.assign(new n,t);r.push(e)})),function(){if(r.length>0)for(let t of r)t.putNoteIntoDom(),null!==t.x&&null!==t.y&&t.positionChange()}(),i.addEventListener("click",(function(){const t=document.querySelector(".create-note-window"),e=document.querySelector(".edit-note-window");document.querySelector("#pick-color").value=`#${Math.floor(16777215*Math.random()).toString(16)}`,e.style.display="none",t.style.display="flex"})),s.addEventListener("click",h),d.addEventListener("click",(function(){const t=new n;r.push(t),t.putNoteIntoDom(),h(),window.localStorage.setItem("notes",JSON.stringify(r))})),window.addEventListener("resize",(()=>{r.forEach((t=>t.windowResizeHandler()))})),l.addEventListener("click",(()=>{const t=document.querySelector(".edit-note-window");t.querySelector("button").remove(),t.style.display="none"})),o.addEventListener("click",(function(){r.forEach((t=>{t.noteWindow.classList.remove("position-absolute"),t.x=null,t.y=null})),window.localStorage.setItem("notes",JSON.stringify(r))}))}();
//# sourceMappingURL=bundle.min.js.map